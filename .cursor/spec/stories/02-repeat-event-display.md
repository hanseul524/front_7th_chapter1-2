---
title: 반복 일정 표시 스토리
category: calendar
type: story
updated: 2025-10-30
---

## 목적
반복 일정은 캘린더 뷰와 일정 리스트에서 일반 일정과 시각적으로 구분되어야 한다. 접근성(ARIA) 속성을 포함하여 반복 여부를 명확히 표현한다.

## 사용자 시나리오
1. 사용자가 반복 일정(예: 매주)을 생성한다.
2. 캘린더 주/월 뷰의 해당 날짜 셀에 반복 아이콘이 노출된다.
3. 우측 일정 리스트에도 같은 반복 아이콘이 노출된다.
4. 알림이 트리거된 일정의 경우 알림 아이콘과 함께 표기되며, 아이콘 우선순위는 알림 > 반복이다.

## 표시 규칙
- 반복 여부: `event.repeat.type !== 'none'`이면 반복으로 간주
- 아이콘: Material-UI `Repeat` 아이콘 사용
- 접근성: 아이콘 요소에 `aria-label="반복 일정"` 부여
- 위치
  - 주 뷰, 월 뷰: 각 일정 배지 내부의 텍스트 좌측 아이콘 Stack에 반복 아이콘 추가
  - 일정 리스트: 제목 좌측 아이콘 Stack에 반복 아이콘 추가
- 아이콘 우선순위: 알림 아이콘(`Notifications`) 다음에 반복 아이콘(`Repeat`) 순서로 렌더링

## 예외/비고
- 반복 여부는 표시만 하며, 인스턴스 생성 로직과 겹침 검증은 본 스토리 범위가 아님
- 색상은 테마 기본을 사용하고 하드코딩 금지

## 접근성
- `aria-label="반복 일정"` 필수
- 시맨틱 마크업 유지, 아이콘만으로 의미가 전달되지 않도록 텍스트 정보 병행 표기(제목 등)

## 테스트 케이스 (TDD)
1) 실패 테스트: 주/월 뷰에 반복 아이콘 노출 검증
   - 준비: 서버에서 이벤트 로드, 하나는 `repeat.type !== 'none'`
   - 기대: 해당 날짜 셀 내에서 `getByLabelText('반복 일정')` 탐지됨

2) 실패 테스트: 일정 리스트에 반복 아이콘 노출 검증
   - 준비: 동일 데이터
   - 기대: 리스트 항목 내 `getAllByLabelText('반복 일정')` 중 최소 1개 존재

3) 우선순위 테스트: 알림 아이콘이 있을 때 반복 아이콘과 함께 노출되며, 순서가 알림 > 반복
   - 준비: `notifiedEvents`에 대상 이벤트 id 포함
   - 기대: DOM 순서상 Notifications 다음 Repeat가 배치됨

4) 접근성 테스트: 반복 아이콘에 `aria-label`이 정확히 부여됨

## Out of Scope
- 반복 인스턴스 생성/검증 규칙(요구사항 1, 3)은 별도 스토리/테스트에서 다룸

