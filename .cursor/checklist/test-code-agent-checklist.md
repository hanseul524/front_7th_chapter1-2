# 🧪 테스트코드 작성 에이전트 검증 체크리스트

> Purpose: 테스트 설계 명세를 실행 가능한 테스트로 구현할 때, 타입 안전성·접근성·결정성을 보장하고 프로젝트 규칙을 준수했는지 검증합니다. (1차 자체 점검 → CEO 승인)

---

## 1️⃣ 요구사항 명확성
| 번호 | 항목 | 설명 | 점검 |
|------|------|------|------|
| 1-1 | 시나리오 매핑 | 모든 시나리오가 테스트 파일/케이스로 일대일 매핑 | ☐ |
| 1-2 | 명명 규칙 | 테스트 이름이 한글 설명, 시나리오 서술형 | ☐ |
| 1-3 | 커버리지 목표 | 파일/라인/브랜치 목표와 미달 사유 기록 | ☐ |

---

## 2️⃣ 입력·출력 정의
| 번호 | 항목 | 설명 | 점검 |
|------|------|------|------|
| 2-1 | 고정된 테스트 데이터 | 타임존 UTC, 시드 고정, ISO/24시간 형식 사용 | ☐ |
| 2-2 | MSW 핸들러 | `src/__mocks__/handlers.ts` 활용, API 경계 모킹 | ☐ |
| 2-3 | 관찰 포인트 | 화면 텍스트/role/aria, 훅 상태, 유틸 반환값 검증 | ☐ |

---

## 3️⃣ 처리 로직 구체성
| 번호 | 항목 | 설명 | 점검 |
|------|------|------|------|
| 3-1 | AAA 패턴 | Arrange-Act-Assert 구조 준수 | ☐ |
| 3-2 | 구현 세부 회피 | 내부 구현이 아닌 공개 API/사용자 관점 검증 | ☐ |
| 3-3 | 동기/비동기 처리 | `await`/`findBy*`/`waitFor` 적절 사용 | ☐ |
| 3-4 | 훅 테스트 | `renderHook`, `act` 사용, 상태·에러·로딩 검증 | ☐ |

---

## 4️⃣ 에러 및 예외 처리
| 번호 | 항목 | 설명 | 점검 |
|------|------|------|------|
| 4-1 | 폼 검증 에러 | 필수값/시간 순서/겹침 오류 UI 검증 | ☐ |
| 4-2 | API 오류 | HTTP 상태별 에러 메시지/재시도 UX 검증 | ☐ |
| 4-3 | 접근성 실패 | 누락된 `id`/`aria-label` 검출 테스트 포함 | ☐ |

---

## 5️⃣ 테스트 기반성
| 번호 | 항목 | 설명 | 점검 |
|------|------|------|------|
| 5-1 | 결정성 | 타이머/시간 고정(`vi.useFakeTimers` 등) | ☐ |
| 5-2 | 독립성 | 케이스 간 상태 공유 금지, 파일 격리 | ☐ |
| 5-3 | 성능 | 과도한 렌더/대기 회피, 최소한의 렌더로 검증 | ☐ |

---

## 6️⃣ 문서 품질
| 번호 | 항목 | 설명 | 점검 |
|------|------|------|------|
| 6-1 | 디렉토리 구조 | `src/__tests__/hooks|unit|integration` 위치 준수 | ☐ |
| 6-2 | 파일명 규칙 | `*.spec.ts(x)` 네이밍, 대상과 1:1 매칭 | ☐ |
| 6-3 | 주석 최소화 | 테스트 의도가 코드와 설명으로 충분히 드러남 | ☐ |

---

## 7️⃣ 프로젝트 맥락·영향
| 번호 | 항목 | 설명 | 점검 |
|------|------|------|------|
| 7-1 | 규칙 준수 | any 금지, 명시적 타입, 접근성, 성능 규칙 반영 | ☐ |
| 7-2 | 회귀 테스트 | 영향 범위의 기존 테스트 보강 여부 | ☐ |

---

## 8️⃣ 프롬프트 품질
| 번호 | 항목 | 설명 | 점검 |
|------|------|------|------|
| 8-1 | 출력 형식 | 통과/실패 기준과 증빙(스크린샷/로그) 안내 | ☐ |
| 8-2 | 금지사항 | 구현 세부 검사, 과도한 mock 금지 안내 | ☐ |

---

## 📎 산출물
- 테스트 코드(PR 포함)
- 커버리지 리포트
- MSW 핸들러/목 데이터 업데이트 목록

---

## 📚 참고 문서
- `.cursor/docs/tdd-document.md` — Red/Green/Refactor, Tidy First 커밋 분리
- `.cursorrules` — 테스트 구조/한글 설명/AAA/UTC·ISO 규칙 준수

## 🧾 제출 지침
- 본 체크리스트로 1차 자체 점검 완료 후 결과 보고서를 다음 경로에 작성:
  - `.cursor/outputs/test-code-review.md`
- 보고서에는 다음을 포함:
  - 시나리오 ↔ 테스트 케이스 매핑 표
  - 커버리지 스냅샷 및 미달 항목과 사유
  - 명령/로그: `pnpm test`, `pnpm test:coverage`


---

## 🚦 단계 게이트 (TDD & 승인)

- [ ] Red: 실패 테스트 커밋 완료(필요 시 테스트 파일 상단 임시 ESLint 비활성화 주석 포함)
  - 예: `/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/no-explicit-any */`
- [ ] Green: 최소 구현으로 전체 테스트 통과, 임시 린트 예외 제거
- [ ] Refactor: 테스트 코드 정리(중복 제거/명명 개선)
- [ ] 자체 점검 체크리스트 전 항목 확인(✅)
- [ ] CEO 승인 완료(`.cursor/outputs/ceo-approval.md` 반영)
- [ ] 다음 단계로 전환: 코드작성 에이전트


